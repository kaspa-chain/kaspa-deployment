
kaspad:
  kaspadApiDomain: grpc.kaspa-chain.net
  enabled: true
  nameOverride: kaspad

  ingress:
    enabled: false

  podDisruptionBudget:
    enabled: false

  pods:
    controller: deployment
    command:
      - kaspad
    args:
      - --utxoindex
      - --archival
      #- --rpclisten-borsh=public
      #- --yes
      #- --unsaferpc
    replicas: 1
    strategy:
      type: Recreate

    securityContext:
      fsGroup: 999
      runAsUser: 999
      runAsGroup: 999

    resources:
      limits:
        cpu: 3500m
        memory: 4Gi
      requests:
        cpu: 1350m
        memory: 2Gi
  
    ports:
      - containerPort: 16110
      - containerPort: 16111
    image:
      name: asia-southeast1-docker.pkg.dev/its-artifact-commons/kaspa/kaspad

    volumeMounts:
      - name: data-dir
        mountPath: /home/kaspa/.rusty-kaspa

    volumes:
      - name: data-dir
        persistentVolumeClaim:
          claimName: kaspad-pvc

  service:
    enabled: true
    ports:
      - port: 16110
        targetPort: 16110
        protocol: TCP
        name: grpc-mainnet

      - port: 16111
        targetPort: 16111
        protocol: TCP
        name: p2p-mainnet
